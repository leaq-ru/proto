syntax = "proto3";

package org;
option go_package = "github.com/nnqq/scr-proto/codegen/go/org";

import "google/protobuf/empty.proto";

service Org {
  rpc Reindex(ReindexRequest) returns (google.protobuf.Empty) {};
}

enum OrgKind {
  ORG_KIND_NONE = 0;
  // Юридическое лицо
  LEGAL = 1;
  // Индивидуальный предприниматель
  INDIVIDUAL = 2;
}

// Версия справочника ОКВЭД
enum OkvedKind {
  OKVED_KIND_NONE = 0;
  y2001 = 1;
  y2004 = 2;
}

// Версия справочника ОКОПФ
enum OpfKind {
  OPF_KIND_NONE = 0;
  y1999 = 1;
  y2012 = 2;
  y2014 = 3;
}

// Тип подразделения
enum BranchKind {
  BRANCH_KIND_NONE = 0;
  // Головная организация
  MAIN = 1;
  // Филиал
  BRANCH = 2;
}

// Статус организации
enum StatusKind {
  STATUS_KIND_NONE = 0;
  // Действующая
  ACTIVE = 1;
  // Ликвидируется
  LIQUIDATING = 2;
  // Ликвидирована
  LIQUIDATED = 3;
  // Банкротство
  BANKRUPT = 4;
  // В процессе присоединения к другому юрлицу, с последующей ликвидацией
  REORGANIZING = 5;
}

message Metro {
  string name = 1;
  string line = 2;
  float distance = 3;
}

message ReindexRequest {
  string dadata_id = 1;
  string name = 2;
  double inn = 3;
  double kpp = 4;
  double ogrn = 5;
  string ogrn_date = 6;
  OrgKind org_kind = 7;
  string name_full_with_opf = 8;
  string name_short_with_opf = 9;
  double okato = 10;
  double oktmo = 11;
  double okpo = 12;
  double okogu = 13;
  double okfs = 14;
  string okved = 15;
  OkvedKind okved_kind = 16;
  double opf_code = 17;
  string opf_full = 18;
  string opf_short = 19;
  OpfKind opf_kind = 20;
  string management_name = 21;
  string management_post = 22;
  uint32 branch_count = 23;
  BranchKind branch_kind = 24;
  string address = 25;
  repeated Metro metro = 26;
  string city_fias_id = 27;
  string city_kladr_id = 28;
  string city_name = 29;
  string city_type = 30;
  string city_type_full = 31;
  string settlement_fias_id = 32;
  string settlement_kladr_id = 33;
  string settlement_name = 34;
  string settlement_type = 35;
  string settlement_type_full = 36;
  string registration_date = 37;
  string liquidation_date = 38;
  StatusKind status_kind = 39;
}
